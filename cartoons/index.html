<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cartoon Watchlist V2 üì∫</title>
    <style>
        :root {
            /* Light Mode */
            --bg-color: #f0f2f5;
            --text-color: #1a1a1a;
            --card-bg: #ffffff;
            --accent-color: #6200ea;
            --accent-hover: #3700b3;
            --border-color: #e0e0e0;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --modal-overlay: rgba(0,0,0,0.5);
            --success-color: #00c853;
        }

        [data-theme="dark"] {
            /* Dark Mode (Hacker Vibe) */
            --bg-color: #0f0f13;
            --text-color: #e0e0e0;
            --card-bg: #1a1a1f;
            --accent-color: #00e5ff;
            --accent-hover: #00b8d4;
            --border-color: #333333;
            --shadow: 0 4px 15px rgba(0, 229, 255, 0.15);
            --modal-overlay: rgba(0,0,0,0.9);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; transition: background-color 0.3s, color 0.3s, border-color 0.3s; }

        body { background-color: var(--bg-color); color: var(--text-color); padding-bottom: 50px; }

        /* Header */
        header {
            position: sticky; top: 0; z-index: 100;
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: var(--shadow);
            flex-wrap: wrap; gap: 10px;
        }

        h1 { font-size: 1.5rem; font-weight: 800; letter-spacing: -0.5px; }
        h1 span { color: var(--accent-color); }

        .controls { display: flex; gap: 15px; align-items: center; }

        input[type="text"] {
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--bg-color);
            color: var(--text-color);
            outline: none;
            width: 250px;
        }
        input[type="text"]:focus { border-color: var(--accent-color); }

        button {
            cursor: pointer; border: none; outline: none;
            padding: 8px 16px; border-radius: 6px;
            font-weight: 600; font-size: 0.9rem;
            display: flex; align-items: center; gap: 5px;
        }

        .btn-toggle { background: var(--bg-color); color: var(--text-color); border: 1px solid var(--border-color); }
        .btn-toggle:hover { border-color: var(--accent-color); }

        /* Grid Layout */
        .container {
            max-width: 1400px; margin: 2rem auto; padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        /* Cards */
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            display: flex; flex-direction: column;
            box-shadow: var(--shadow);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
            border-color: var(--accent-color);
        }

        /* Image Area */
        .card-img-container {
            width: 100%;
            height: 380px; /* Poster height */
            background-color: #000;
            overflow: hidden;
            position: relative;
        }

        .card-img {
            width: 100%; height: 100%;
            object-fit: cover;
            transition: opacity 0.5s ease;
            opacity: 0; /* Fade in on load */
        }
        .card-img.loaded { opacity: 1; }

        .card-overlay {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, var(--card-bg) 10%, transparent);
            height: 100px;
            pointer-events: none;
        }

        /* Card Content */
        .card-content { padding: 15px 20px 20px; flex-grow: 1; display: flex; flex-direction: column; gap: 8px; }

        .card-header { display: flex; justify-content: space-between; align-items: flex-start; }
        .card-title { font-size: 1.3rem; font-weight: 700; line-height: 1.2; }
        .card-meta { font-size: 0.85rem; opacity: 0.7; margin-top: 2px; }

        .btn-copy { 
            background: rgba(128,128,128,0.1); 
            color: var(--text-color); 
            padding: 6px; 
            border-radius: 50%;
            margin-left: 10px;
        }
        .btn-copy:hover { background: var(--accent-color); color: #fff; }

        .tags { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px; }
        .tag {
            padding: 4px 8px; border-radius: 4px;
            font-size: 0.75rem; font-weight: bold; text-transform: uppercase;
            background: rgba(128, 128, 128, 0.2);
        }
        .tag.ongoing { color: var(--success-color); border: 1px solid var(--success-color); background: rgba(0, 200, 83, 0.1); }
        .tag.ended { color: #ff5252; border: 1px solid #ff5252; background: rgba(255, 82, 82, 0.1); }

        .read-more {
            margin-top: auto; padding-top: 15px;
            color: var(--accent-color); cursor: pointer; font-weight: 600; font-size: 0.9rem;
            display: inline-block;
        }

        /* Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--modal-overlay);
            display: none; justify-content: center; align-items: center; z-index: 1000;
            backdrop-filter: blur(5px);
            padding: 20px;
        }
        .modal-overlay.active { display: flex; animation: fadeIn 0.2s ease-out; }

        .modal-content {
            background: var(--card-bg); width: 100%; max-width: 800px;
            border-radius: 16px; border: 1px solid var(--border-color);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-height: 90vh; overflow-y: auto;
            display: flex; flex-direction: column;
            position: relative;
        }

        .modal-body { display: flex; flex-direction: row; }
        
        .modal-img {
            width: 300px; min-width: 300px;
            object-fit: cover;
            display: none; /* Hidden on mobile */
        }
        @media (min-width: 768px) { .modal-img { display: block; } }

        .modal-info { padding: 30px; flex-grow: 1; }

        .modal-close {
            position: absolute; top: 15px; right: 20px;
            font-size: 2rem; cursor: pointer; color: var(--text-color); opacity: 0.5; z-index: 10;
        }
        .modal-close:hover { opacity: 1; color: #ff5252; }

        .detail-row { display: flex; justify-content: space-between; margin: 10px 0; border-bottom: 1px solid var(--border-color); padding-bottom: 5px; }
        .detail-label { font-weight: bold; opacity: 0.7; }

        .btn-primary { 
            background-color: var(--accent-color); 
            color: #000; /* Dark text for contrast on neon colors */
            width: 100%; justify-content: center; margin-top: 20px; 
        }
        [data-theme="light"] .btn-primary { color: #fff; }
        .btn-primary:hover { background-color: var(--accent-hover); }

        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        @media (max-width: 600px) {
            header { flex-direction: column; align-items: stretch; }
            .controls { flex-direction: row; justify-content: space-between; }
            input[type="text"] { width: 100%; }
            .card-img-container { height: 300px; }
        }
    </style>
</head>
<body>

<header>
    <h1>My Watchlist <span>üî•</span></h1>
    <div class="controls">
        <input type="text" id="searchInput" placeholder="Search shows..." onkeyup="filterShows()">
        <button class="btn-toggle" onclick="toggleTheme()" id="themeBtn">‚òÄÔ∏è Mode</button>
    </div>
</header>

<div class="container" id="cardsContainer">
    <!-- Cards injected here by JS -->
</div>

<!-- Modal -->
<div class="modal-overlay" id="infoModal" onclick="closeModal(event)">
    <div class="modal-content">
        <span class="modal-close" onclick="closeModal(null)">&times;</span>
        <div class="modal-body">
            <img src="" alt="Poster" class="modal-img" id="modalPoster">
            <div class="modal-info">
                <h2 id="modalTitle" style="margin-bottom: 5px; font-size: 2rem; color: var(--accent-color);"></h2>
                <div class="tags" style="margin-bottom: 20px;">
                    <span class="tag" id="modalStatus"></span>
                    <span class="tag" id="modalGenreTag"></span>
                </div>
                
                <div class="detail-row">
                    <span class="detail-label">Seasons</span>
                    <span id="modalSeasons"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Rating</span>
                    <span id="modalRating" style="color: gold;"></span>
                </div>

                <h3 style="margin-top: 20px; margin-bottom: 10px;">Synopsis</h3>
                <p id="modalDesc" style="line-height: 1.6; opacity: 0.9;"></p>

                <button class="btn-primary" onclick="copyModalData()">
                    üìã Copy All Info
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    // --- DATA ---
    const shows = [
        { title: "South Park", seasons: "27 Seasons", status: "Ongoing", genre: "Satire", rating: "8.7", desc: "Four grade-schoolers live in the dysfuntional town of South Park, Colorado. Known for its crudeness, dark humor, and surreal satire of current events." },
        { title: "American Dad!", seasons: "21 Seasons", status: "Ongoing", genre: "Sitcom", rating: "7.4", desc: "The escapades of Stan Smith, a conservative CIA agent dealing with family life, and keeping America safe in the most absurd ways possible." },
        { title: "Solar Opposites", seasons: "6 Seasons", status: "Ongoing", genre: "Sci-Fi", rating: "8.0", desc: "A family of aliens from a better world must take refuge in middle America. They disagree on whether this is awful or awesome." },
        { title: "The Boondocks", seasons: "4 Seasons", status: "Ended", genre: "Satire", rating: "8.5", desc: "Huey and Riley move away from the city to live with their grandfather in the suburbs, where they clash with the culture and each other." },
        { title: "King of the Hill", seasons: "13 Seasons", status: "Ended", genre: "Slice of Life", rating: "7.5", desc: "A straight-laced propane salesman in Arlen, Texas tries to deal with the wacky antics of his family and friends." },
        { title: "Bob's Burgers", seasons: "16 Seasons", status: "Ongoing", genre: "Sitcom", rating: "8.2", desc: "Bob Belcher runs his dream restaurant with his wife and three children as their last hope of holding the family together." },
        { title: "BoJack Horseman", seasons: "6 Seasons", status: "Ended", genre: "Drama", rating: "8.8", desc: "A humanoid horse, BoJack, lost in a sea of self-loathing and booze, decides it's time for a comeback." },
        { title: "The Simpsons", seasons: "36 Seasons", status: "Ongoing", genre: "Sitcom", rating: "8.7", desc: "The satiric adventures of a working-class family in the misfit city of Springfield." },
        { title: "Daria", seasons: "5 Seasons", status: "Ended", genre: "Satire", rating: "8.1", desc: "A smart, acerbic, and somewhat misanthropic teenage girl observes the world around her." },
        { title: "The Great North", seasons: "5 Seasons", status: "Ongoing", genre: "Sitcom", rating: "6.6", desc: "The adventures of the Tobin family in Alaska, as a single dad does his best to keep his weird bunch of kids close." },
        { title: "Central Park", seasons: "3 Seasons", status: "Ended", genre: "Musical", rating: "6.9", desc: "An animated musical comedy about the Tillerman family who live in and care for Central Park." },
        { title: "Bless the Harts", seasons: "2 Seasons", status: "Ended", genre: "Sitcom", rating: "6.0", desc: "A group of Southerners struggle for the American dream of status and wealth, but they're already rich in friends and laughter." },
        { title: "Duncanville", seasons: "3 Seasons", status: "Ended", genre: "Sitcom", rating: "6.0", desc: "The life of Duncan, a spectacularly average 15-year-old boy, his family, and friends." },
        { title: "Final Space", seasons: "3 Seasons", status: "Ended", genre: "Sci-Fi", rating: "8.2", desc: "An astronaut named Gary and his planet-destroying sidekick Mooncake embark on serialized journeys through space to unlock the mystery of Final Space." },
        { title: "Harley Quinn", seasons: "5 Seasons", status: "Ongoing", genre: "Action", rating: "8.4", desc: "Harley Quinn strikes out on her own to become the criminal Queenpin of Gotham City." },
        { title: "Corner Gas Animated", seasons: "4 Seasons", status: "Ended", genre: "Sitcom", rating: "7.7", desc: "The residents of Dog River, Saskatchewan are reimagined in animated form, still dealing with the daily nothingness." },
        { title: "The Venture Bros", seasons: "7 Seasons", status: "Ended", genre: "Adventure", rating: "8.6", desc: "The bizarre animated escapades of the Venture family, including the world-renowned Dr. Venture and his sons." },
        { title: "Metalocalypse", seasons: "4 Seasons", status: "Ended", genre: "Metal", rating: "8.3", desc: "Dethklok is the world's most popular death metal band. Their success is so great that they have their own economy and law." },
        { title: "Samurai Jack", seasons: "5 Seasons", status: "Ended", genre: "Action", rating: "8.5", desc: "A samurai sent through time fights to return home and save the world from the evil Aku." },
        { title: "Smiling Friends", seasons: "5 Seasons", status: "Ongoing", genre: "Surreal", rating: "8.6", desc: "Employees of a small company dedicated to bringing happiness to a bizarre yet colorful world." },
        { title: "Fugget About It", seasons: "3 Seasons", status: "Ended", genre: "Sitcom", rating: "6.5", desc: "Jimmy Falcone, a former NY mob boss, is in witness protection in Regina, Saskatchewan with his family." },
        { title: "Haunted Hotel", seasons: "1 Season", status: "Ongoing", genre: "Horror Comedy", rating: "7.5", desc: "A single mom inherits the Undervale Hotel and runs it with her kids and her estranged ghost brother. Created by Matt Roller." }
    ];

    // --- RENDER LOGIC ---
    const container = document.getElementById('cardsContainer');

    function renderShows(filter = "") {
        container.innerHTML = "";
        const filtered = shows.filter(s => s.title.toLowerCase().includes(filter.toLowerCase()));

        filtered.forEach((show) => {
            const statusClass = show.status === "Ongoing" ? "ongoing" : "ended";
            const safeTitle = show.title.replace(/'/g, "\\'"); 
            
            // Unique ID for image injection
            const imgId = `img-${show.title.replace(/\s+/g, '-').replace(/[^a-zA-Z0-9-]/g, '')}`;

            const card = document.createElement('div');
            card.className = "card";
            card.innerHTML = `
                <div class="card-img-container">
                    <img id="${imgId}" class="card-img" src="https://placehold.co/400x600/1a1a1f/666?text=Loading..." alt="${show.title}">
                    <div class="card-overlay"></div>
                </div>
                <div class="card-content">
                    <div class="card-header">
                        <div class="card-title">${show.title}</div>
                        <button class="btn-copy" onclick="copyText('${safeTitle}')" title="Copy Name">
                            üìã
                        </button>
                    </div>
                    <div class="card-meta">${show.seasons}</div>
                    <div class="tags">
                        <span class="tag ${statusClass}">${show.status}</span>
                        <span class="tag">${show.genre}</span>
                    </div>
                    <div class="read-more" onclick="openModalByTitle('${safeTitle}')">View Details &rarr;</div>
                </div>
            `;
            container.appendChild(card);
            
            // Trigger background fetch for image
            fetchPoster(show.title, imgId);
        });
    }

    // --- IMAGE FETCHING (TVMAZE API) ---
    async function fetchPoster(title, imgId) {
        // Fallback image generator
        const fallback = `https://placehold.co/400x600/1a1a1f/FFF?text=${encodeURIComponent(title)}`;
        
        try {
            // Clean title for API (remove 'Animated' sometimes helps, but 'Corner Gas Animated' is specific)
            const response = await fetch(`https://api.tvmaze.com/singlesearch/shows?q=${encodeURIComponent(title)}`);
            if (!response.ok) throw new Error('Not found');
            
            const data = await response.json();
            
            // Prefer original (high quality), fall back to medium
            const imageUrl = data.image ? (data.image.original || data.image.medium) : fallback;
            
            const imgEl = document.getElementById(imgId);
            if (imgEl) {
                imgEl.src = imageUrl;
                imgEl.onload = () => imgEl.classList.add('loaded');
            }
        } catch (e) {
            // On error, use pretty placeholder
            const imgEl = document.getElementById(imgId);
            if (imgEl) {
                imgEl.src = fallback;
                imgEl.onload = () => imgEl.classList.add('loaded');
            }
        }
    }

    // --- MODAL & UTILS ---
    const modal = document.getElementById('infoModal');

    window.openModalByTitle = function(title) {
        const show = shows.find(s => s.title === title);
        if(!show) return;
        
        document.getElementById('modalTitle').innerText = show.title;
        document.getElementById('modalSeasons').innerText = show.seasons;
        document.getElementById('modalGenreTag').innerText = show.genre;
        document.getElementById('modalRating').innerText = `‚òÖ ${show.rating}/10`;
        document.getElementById('modalDesc').innerText = show.desc;
        
        const statusEl = document.getElementById('modalStatus');
        statusEl.innerText = show.status;
        statusEl.className = `tag ${show.status === 'Ongoing' ? 'ongoing' : 'ended'}`;

        // Get the image source from the card to populate the modal
        const imgId = `img-${show.title.replace(/\s+/g, '-').replace(/[^a-zA-Z0-9-]/g, '')}`;
        const cardImg = document.getElementById(imgId);
        document.getElementById('modalPoster').src = cardImg ? cardImg.src : '';

        modal.classList.add('active');
    }

    function closeModal(e) {
        if (!e || e.target === modal || e.target.classList.contains('modal-close')) {
            modal.classList.remove('active');
        }
    }

    function filterShows() {
        const query = document.getElementById('searchInput').value;
        renderShows(query);
    }

    function toggleTheme() {
        const html = document.documentElement;
        const current = html.getAttribute('data-theme');
        const btn = document.getElementById('themeBtn');
        
        if (current === 'light') {
            html.setAttribute('data-theme', 'dark');
            btn.innerText = '‚òÄÔ∏è Mode';
        } else {
            html.setAttribute('data-theme', 'light');
            btn.innerText = 'üåô Mode';
        }
    }

    function copyText(text) {
        navigator.clipboard.writeText(text).then(() => {
            const el = document.activeElement;
            const original = el.innerText;
            el.innerText = "‚úÖ";
            setTimeout(() => el.innerText = original, 1000);
        });
    }

    function copyModalData() {
        const title = document.getElementById('modalTitle').innerText;
        const seasons = document.getElementById('modalSeasons').innerText;
        const desc = document.getElementById('modalDesc').innerText;
        const text = `${title} (${seasons})\n${desc}`;
        
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.querySelector('.modal-content .btn-primary');
            const originalText = btn.innerText;
            btn.innerText = "‚úÖ Copied!";
            setTimeout(() => btn.innerText = originalText, 1500);
        });
    }

    // Init
    renderShows();
    document.documentElement.setAttribute('data-theme', 'dark'); // Default Dark
</script>
</body>
</html>
