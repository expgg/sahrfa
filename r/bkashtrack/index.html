<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0; /* Remove default body margin */
            background-color: #1a1a1a; /* Very dark background */
            color: #eee; /* Light text color */
            padding-top: 90px; /* Space for the fixed header to prevent content overlap */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* Fixed Tracker Bar at the top */
        .fixed-tracker-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #282828; /* Slightly lighter dark for the bar */
            z-index: 1000; /* Ensure it stays on top of other content */
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.6); /* Darker shadow */
            display: flex;
            justify-content: space-around; /* Distribute space between balance and summary */
            align-items: center;
            box-sizing: border-box; /* Include padding in width calculation */
            color: #eee; /* Light text color for the bar */
        }

        .fixed-tracker-bar .balance-display {
            font-size: 1.6em; /* Slightly larger for emphasis */
            font-weight: bold;
            color: #FFC107; /* A contrasting yellow for the main balance */
            margin: 0;
            padding: 0;
            background-color: transparent; /* No background for this element within the bar */
            border: none; /* No border for this element */
            text-align: center;
            flex-shrink: 0; /* Prevent it from shrinking */
        }

        .fixed-tracker-bar .summary-section {
            display: flex;
            gap: 25px; /* Space between income and expense summary */
            margin-left: 30px; /* Space from main balance */
            flex-grow: 1; /* Allow summary to take up available space */
            justify-content: flex-end; /* Align summary items to the right */
        }

        .fixed-tracker-bar .summary-item {
            font-size: 1.1em;
            padding: 0;
            border: none;
            margin: 0;
            color: #eee; /* Default text color for summary items */
        }

        .fixed-tracker-bar .summary-item #totalIncome {
            color: #4CAF50; /* Brighter green for dark theme */
            font-weight: bold;
        }
        .fixed-tracker-bar .summary-item #totalExpense {
            color: #EF5350; /* Brighter red for dark theme */
            font-weight: bold;
        }

        /* Main Transaction Container (scrollable content) */
        .container {
            max-width: 600px;
            margin: 20px auto; /* Centered, with margin from top fixed bar and bottom */
            background-color: #333; /* Dark background for main content area */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4); /* Darker shadow */
            color: #eee; /* Light text color for main content */
        }

        h1 {
            color: #FF4081; /* Vibrant pink/magenta for headings */
            text-align: center;
            margin-top: 0; /* Remove default top margin */
            margin-bottom: 20px;
        }
        
        .transaction-list {
            list-style: none;
            padding: 0;
        }
        .transaction-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #444; /* Darker border for dark theme */
        }
        .transaction-item:last-child {
            border-bottom: none;
        }
        .transaction-item input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.2);
            cursor: pointer;
            filter: invert(0.9); /* Makes checkbox visible on dark background */
        }
        .transaction-details {
            flex-grow: 1;
        }
        .transaction-details .desc {
            font-weight: bold;
            color: #eee;
        }
        .transaction-details .date {
            font-size: 0.9em;
            color: #bbb; /* Lighter gray for dates */
        }
        .transaction-amount {
            font-weight: bold;
            font-size: 1.1em;
            text-align: right;
            min-width: 100px; /* Ensure consistent alignment */
        }
        .income .transaction-amount {
            color: #4CAF50; /* Green for income (readable on dark) */
        }
        .expense .transaction-amount {
            color: #EF5350; /* Red for expense (readable on dark) */
        }
    </style>
</head>
<body>
    <div class="fixed-tracker-bar">
        <div class="balance-display">
            Balance: ৳<span id="currentBalance">0.00</span>
        </div>
        <div class="summary-section">
            <div class="summary-item">
                Income: ৳<span id="totalIncome">0.00</span>
            </div>
            <div class="summary-item">
                Expense: ৳<span id="totalExpense">0.00</span>
            </div>
        </div>
    </div>

    <div class="container">
        <h1>Transaction History</h1>
        <ul id="transactionList" class="transaction-list">
            </ul>
    </div>

    <script>
        const initialBalance = 0; // Starting balance is ৳0
        
        // Transaction data
        const transactions = [
            { id: 1, type: 'income', description: 'Received Money (bks)', amount: 9000, date: 'June 7, 2025 06:31 PM', checked: false },
            { id: 2, type: 'income', description: 'Cash In (01876257155)', amount: 1000, date: 'June 8, 2025 12:04 AM', checked: false },
            { id: 3, type: 'expense', description: 'Mobile Recharge (Rifat Bks)', amount: 10, date: 'June 12, 2025 09:06 AM', checked: false },
            { id: 4, type: 'income', description: 'Mobile Recharge Reversal (Rifat Bks)', amount: 10, date: 'June 12, 2025 09:06 AM', checked: false },
            { id: 5, type: 'expense', description: 'Mobile Recharge (Rifat Bks)', amount: 20, date: 'June 12, 2025 09:07 AM', checked: false },
            { id: 6, type: 'expense', description: 'Make Payment (Star Tech - Online)', amount: 100, date: 'June 12, 2025 07:39 PM', checked: false },
            { id: 7, type: 'expense', description: 'Pay Bill (NESCO (Prepaid))', amount: 1000, date: 'June 14, 2025 07:02 PM', checked: false },
            { id: 8, type: 'expense', description: 'Mobile Recharge (Ammu)', amount: 250, date: 'June 14, 2025 07:30 PM', checked: false },
            { id: 9, type: 'expense', description: 'Send Money (Sazzad Vai)', amount: 4000, date: 'June 15, 2025 08:30 PM', checked: false },
            { id: 10, type: 'expense', description: 'Cash Out (M/S Nurjahan Traders)', amount: 500, date: 'June 15, 2025 05:41 PM', checked: false },
            { id: 11, type: 'expense', description: 'Send Money (01878231295)', amount: 233, date: 'June 17, 2025 11:04 AM', checked: false },
            { id: 12, type: 'income', description: 'Cash In (01306070770)', amount: 5000, date: 'June 18, 2025 06:17 PM', checked: false },
            { id: 13, type: 'expense', description: 'Pay Bill (NESCO (Prepaid))', amount: 1000, date: 'June 18, 2025 09:50 PM', checked: false },
            { id: 14, type: 'expense', description: 'Send Money (01751650670)', amount: 1527.75, date: 'June 19, 2025 04:42 PM', checked: false },
            { id: 15, type: 'expense', description: 'Mobile Recharge (Toxi Teletalk)', amount: 25, date: 'June 20, 2025 02:04 PM', checked: false },
            { id: 16, type: 'expense', description: 'Make Payment (SSLCOMMERZ)', amount: 300, date: 'June 22, 2025 01:20 PM', checked: false },
            { id: 17, type: 'income', description: 'Received Money (bks)', amount: 4000, date: 'June 23, 2025 06:30 PM', checked: false },
            { id: 18, type: 'income', description: 'Remittance Received (PBLTTSREM)', amount: 389.50, date: 'June 23, 2025 04:52 PM', checked: false },
            { id: 19, type: 'expense', description: 'Send Money (0160941412)', amount: 400, date: 'June 23, 2025 07:51 PM', checked: false },
            { id: 20, type: 'income', description: 'Remittance Received (PBLTTSREM)', amount: 79.95, date: 'June 23, 2025 07:46 PM', checked: false },
            { id: 21, type: 'expense', description: 'Send Money (bks)', amount: 500, date: 'June 24, 2025 05:09 PM', checked: false },
            { id: 22, type: 'income', description: 'Received Money (bks)', amount: 800, date: 'June 25, 2025 01:43 PM', checked: false },
            { id: 23, type: 'expense', description: 'Cash Out (HTM Cosmetics)', amount: 100, date: 'June 25, 2025 08:33 PM', checked: false },
            { id: 24, type: 'expense', description: 'Mobile Recharge (Abbu)', amount: 260, date: 'June 26, 2025 12:59 PM', checked: false },
            { id: 25, type: 'expense', description: 'Mobile Recharge (Rifat Bks)', amount: 100, date: 'June 29, 2025 07:18 PM', checked: false },
            { id: 26, type: 'expense', description: 'Mobile Recharge (Rifat Bks)', amount: 50, date: 'June 29, 2025 07:26 PM', checked: false },
            { id: 27, type: 'expense', description: 'Send Money (bks)', amount: 400, date: 'June 30, 2025 12:20 PM', checked: false },
            { id: 28, type: 'expense', description: 'Send Money (Abbu)', amount: 1000, date: 'June 30, 2025 02:16 PM', checked: false },
            { id: 29, type: 'expense', description: 'Pay Bill (NESCO (Prepaid))', amount: 1000, date: 'July 2, 2025 12:19 PM', checked: false },
            { id: 30, type: 'expense', description: 'Make Payment (Osudpotro.com)', amount: 426.50, date: 'July 2, 2025 10:58 PM', checked: false }
        ];

        const transactionListElem = document.getElementById('transactionList');
        const balanceDisplayElem = document.getElementById('currentBalance');
        const totalIncomeElem = document.getElementById('totalIncome');
        const totalExpenseElem = document.getElementById('totalExpense');

        // Function to update all balances based on checked transactions
        function updateBalances() {
            let calculatedNetBalance = initialBalance;
            let calculatedTotalIncome = 0;
            let calculatedTotalExpense = 0;

            transactions.forEach(transaction => {
                if (transaction.checked) {
                    if (transaction.type === 'income') {
                        calculatedNetBalance += transaction.amount;
                        calculatedTotalIncome += transaction.amount;
                    } else { // type === 'expense'
                        calculatedNetBalance -= transaction.amount;
                        calculatedTotalExpense += transaction.amount;
                    }
                }
            });

            balanceDisplayElem.textContent = calculatedNetBalance.toFixed(2); // Main balance
            totalIncomeElem.textContent = calculatedTotalIncome.toFixed(2); // Summary income
            totalExpenseElem.textContent = calculatedTotalExpense.toFixed(2); // Summary expense
        }

        // Function to render transactions into the HTML
        function renderTransactions() {
            transactionListElem.innerHTML = ''; // Clear existing list
            transactions.forEach(transaction => {
                const listItem = document.createElement('li');
                listItem.classList.add('transaction-item', transaction.type); // Add income/expense class for styling

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = transaction.checked;
                checkbox.dataset.id = transaction.id; // Store transaction ID in data attribute

                checkbox.addEventListener('change', (event) => {
                    const id = parseInt(event.target.dataset.id);
                    const changedTransaction = transactions.find(t => t.id === id);
                    if (changedTransaction) {
                        changedTransaction.checked = event.target.checked;
                        updateBalances(); // Call the unified update function
                    }
                });

                const detailsDiv = document.createElement('div');
                detailsDiv.classList.add('transaction-details');
                detailsDiv.innerHTML = `
                    <div class="desc">${transaction.description}</div>
                    <div class="date">${transaction.date}</div>
                `;

                const amountSpan = document.createElement('span');
                amountSpan.classList.add('transaction-amount');
                amountSpan.textContent = `${transaction.type === 'income' ? '+' : '-'}৳${transaction.amount.toFixed(2)}`;

                listItem.appendChild(checkbox);
                listItem.appendChild(detailsDiv);
                listItem.appendChild(amountSpan);

                transactionListElem.appendChild(listItem);
            });
        }

        // Initial rendering and balance update when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            renderTransactions();
            updateBalances(); // This will show ৳0.00 for all initially as no checkboxes are checked
        });
    </script>
</body>
</html>
